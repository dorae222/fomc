
# FOMC 문서 크롤러 및 감사 도구

이 디렉토리의 스크립트들은 연방준비제도(Federal Reserve) 웹사이트에서 FOMC 관련 공식 문서를 다운로드하고, 그 결과를 검증하는 역할을 합니다.

---

## 1. 데이터 수집: `fetch_fomc_pdfs.py`

이 스크립트는 FOMC 관련 문서 PDF를 수집하는 메인 크롤러입니다.

### 주요 기능

*   **타겟 수집**: 연준 웹사이트의 역사 자료 페이지부터 시작하여, 지정된 연도와 문서 유형(성명서, 의사록, 베이지북, 회의록 등)에 해당하는 모든 문서 링크를 재귀적으로 탐색합니다.
*   **강력한 다운로드**: 멀티스레딩을 이용한 동시 다운로드, 다운로드 재시도, 이어받기(`--resume`) 기능을 지원하여 안정적인 데이터 수집이 가능합니다.
*   **데이터 검증**: 다운로드한 파일이 유효한 PDF인지, 파일 크기가 정상 범위에 있는지, 내용이 중복되지 않는지(SHA1 해시 기준) 등을 검증하여 데이터의 품질을 보장합니다.
*   **매니페스트 생성**: 모든 다운로드 작업의 결과(저장 경로, 원본 URL, 날짜, 파일 해시 등)를 `data/raw/manifest.csv` 파일에 상세히 기록합니다.

### 실행 방법

프로젝트 루트 디렉토리에서 아래와 같이 실행합니다. 다양한 옵션을 통해 수집할 데이터의 종류, 기간, 다운로드 속도 등을 제어할 수 있습니다.

```bash
python crawler/fetch_fomc_pdfs.py --out data/raw \
  --types statement minutes beigebook transcript \
  --years 1994-2025 \
  --max-workers 32
```

### 핵심 결과물

1.  **다운로드된 파일**: `--out`으로 지정된 경로(예: `data/raw/`) 아래에 `문서유형/연도/파일명.pdf` 형식으로 파일이 저장됩니다.
2.  **매니페스트 파일**: `data/raw/manifest.csv` 파일이 생성되어, 모든 수집된 파일의 상세 메타데이터를 관리합니다.

---

## 2. 결과 감사: `audit_manifest.py`

이 스크립트는 `fetch_fomc_pdfs.py`가 생성한 `manifest.csv` 파일을 분석하여 데이터 수집 현황을 요약하고, 잠재적 오류를 찾아내는 데이터 품질 관리 도구입니다.

### 주요 기능

*   **통계 요약**: 수집된 문서들을 연도별, 유형별로 집계하여 보여주고, 연도-유형 간의 관계를 매트릭스 형태로 출력합니다.
*   **오류 탐지**: 다음과 같은 잠재적 문제점들을 자동으로 찾아내어 보고합니다.
    *   **날짜 오류**: 날짜 파싱이 잘못되었을 가능성이 있는 경우 (예: 1월 1일, 미래 날짜).
    *   **규칙 위반**: 연준의 5년 공개 원칙을 위반하는 최신 회의록(transcript)이 수집된 경우. / 필요없는 규칙 : 제거
    *   **중복 파일**: 파일 내용은 동일하지만(SHA1 해시 동일), 다른 경로에 저장된 중복 파일을 찾아냅니다.

### 실행 방법

데이터 수집이 완료된 후, 프로젝트 루트에서 아래 명령어로 간단히 실행할 수 있습니다.

```bash
python crawler/audit_manifest.py
```

### 핵심 결과물

*   **콘솔 리포트**: 실행 결과로, 데이터 현황 통계와 각종 의심스러운 항목 목록이 터미널에 직접 출력됩니다.

---

## 표준 작업 흐름

1.  `fetch_fomc_pdfs.py`를 실행하여 원하는 기간과 종류의 문서를 모두 다운로드합니다.
2.  `audit_manifest.py`를 실행하여 다운로드된 데이터의 전체적인 현황을 파악하고, 누락되거나 잘못된 데이터가 없는지 검토합니다.

```
